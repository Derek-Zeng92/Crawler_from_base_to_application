!function(e,t){function n(){var e=(Math.random()+"").slice(2);return e=parseInt(e,10),e=e.toString(36)}function r(e,t){console&&console.log&&(e===Rr?console.error(t):e===Nr?console.warn(t):console.log(t))}function o(e,t,n){return t=t>=1?t:0,n=n||null,function(){for(var r=[],o=0,a=arguments.length;a>o;)r.push(arguments[o++]);r.length||n?Pt(function(){e.apply(n,r)},t):Pt(e,t)}}function a(e){return e}function i(e,t){return t=x(f(),t),Hr(e,t)}function c(e,t){var n;return ne(t)?t={filename:t}:J(t)||(t={}),n=t.filename=ne(t.filename)?t.filename:"",J(e)?(n+=n?"/":"",B(e,function(e,r){c(e,x({},t,{filename:n+r}))}),this):Br(e,t)}function s(e,t,n){var r=arguments.length;if(1===r)return Lr.get(e);if(r>1){if(J(t)||Ur(t))return Hr(e,t);if(ne(t))return n=J(n)?n:{},n.fileName=e,c(t,n)}}function u(e,t){return ne(e)&&/^[A-Z][A-Z\d_]{2,}/.test(e)&&!Fr.hasOwnProperty(e)&&/^(?:string|number|boolean)$/.test(typeof t)&&(Fr[e]=t),this}function l(e,t){return ne(e)?u(e,t):J(e)&&B(e,function(e,t){l(t,e)}),this}function f(e,t){var n,r,o,a;if(!e)return M(Fr);if(J(e)){n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=Fr.hasOwnProperty(r)?Fr[r]:e[r]);return n}if(Ur(e)){for(n={},o=0,a=e.length;a>o;o++)r=e[o],ne(r)&&Fr.hasOwnProperty(r)&&(n[r]=Fr[r]);return n}return Fr.hasOwnProperty(e)?Fr[e]:t}function d(e){var t,n,r,o,a={};if(e.dataset)B(e.dataset,function(e,t){a[pe(t)]=e});else if(H(e.attributes))for(t=e.attributes,n=0;n<t.length;n++)r=t[n],r&&r.name&&(o=r.name,/^data\-/.test(o)&&(o=pe(o.slice(5)),a[o]=r.value));return a}function p(e){var t,n=d;return z(e)?n=e:ne(e)&&e&&"*"!==e?(e=ge("data-"+e),n=function(t){return t.getAttribute(e)}):Ur(e)&&(t={},L(e,function(e){t[pe(e)]=ge("data-"+e)}),n=function(e){var n={};return L(t,function(t,r){n[r]=e.getAttribute(t)}),n}),n}function h(e,t){var n=null,r=p(t||"*");return G(e)?n=r(e):ne(e)&&(n=[],St(e).each(function(){n.push(r(this))})),n=Se(n)}function m(e){return e=_(e),e?e.value:null}function g(e){return e=_(e),e?e.innerHTML:null}function _(e){return ne(e)?Dt.getElementById(e)||null:G(e)?e:null}function v(e,t){return re(t)||(e=_(e),e&&(e.value=t)),this}function T(e,t){return re(t)||(e=_(e),e&&(e.innerHTML=t)),this}function y(e){var t=typeof e;return"string"===t||"number"===t}function O(e){return e&&"string"==typeof e}function E(e){return y(e)?(e=encodeURIComponent(e),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,Ct)):""}function I(e){e=E(e);var t,n,r,o,a=Dt.cookie.split(";"),i=a.length;for(o=0;i>o;o++)if(t=a[o],t&&(t=t.split("="),n=t[0].replace(/^\s+|\s+$/g,""),n=n.replace(Wr,decodeURIComponent),n===e))return r=(t[1]||"").replace(Wr,decodeURIComponent);return""}function b(e,t,n,r,o,a){var i,c;return e=E(e),e&&y(t)&&(t=encodeURIComponent(t+""),t=t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t&&(i=[e+"="+t],"number"==typeof n&&(c=new Date,c.setMilliseconds(c.getMilliseconds()+1e3*n),c=c.toUTCString(),i.push("expires="+c)),O(r)&&i.push("path="+r),O(o)&&i.push("domain="+o),a===!0&&i.push("secure"),i=i.join(";"),Dt.cookie=i)),this}function w(e,t){b(e,"0",-1,"/",t)}function S(e,t){return arguments.length>1?S.set(e,t):S.get(e)}function A(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function N(e,t){return this instanceof N?(this.name=e||"",this.debug=!!t,this):new N(e,t)}function R(e,t,n,r){var o=qr?qr+e:e;if(!this._events||!this._events[o])return this;if(!t)return delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||delete this._events[o];else{for(var i=0,c=[],s=a.length;s>i;i++)(a[i].fn!==t||r&&!a[i].once||n&&a[i].context!==n)&&c.push(a[i]);c.length?(this._events[o]=1===c.length?c[0]:c,delete this._events[o]):delete this._events[o]}return this}function D(){return(new Date).getTime()}function P(e,t){var n,r=[],o=function(e,t){t=z(t)?t():X(t)?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(Ur(e))L(e,function(e,t){o(t,e)});else for(n in e)C(n,e[n],t,o);return r.join("&").replace(Gr,"+")}function C(e,t,n,r){Ur(t)?n||Qr.test(e)?L(t,function(t){r(e,t)}):L(t,function(t,o){C(e+"["+("object"==typeof t?o:"")+"]",t,n,r)}):!n&&K(t)?B(t,function(o,a){C(e+"["+a+"]",t[a],n,r)}):r(e,t)}function U(e,t){e=e.slice(e.indexOf("?")+1);var n,r,o,a,i=e.split("&"),c={},s=i.length;for(r=0;s>r;r++)n=i[r].split("="),o=n[0],o&&(o=decodeURIComponent(o),a=n[1],a&&t!==!1&&(a=decodeURIComponent(a)),c[o]=a);return c}function x(e){return K(e)&&L(Cr.call(arguments,1),function(t){L(t,function(t,n){e[n]=t})}),e}function j(e,t){var n=e;return t>1&&(J(e)||Ur(e))?(t--,J(e)?(n={},B(e,function(e,r){n[r]=j(e,t)})):(n=[],L(e,function(e){n.push(j(e,t))}))):n=$(e),n}function $(e){var t=e;return Ur(e)?(t=[],L(e,function(e){t.push(e)})):J(e)&&(t={},B(e,function(e,n){t[n]=e})),t}function M(e,t){return t=t>1?t:t===!0?10:1,j(e,t)}function L(e,t,n){var r,o;if(Ur(e))if(n)for(r=0,o=e.length;o>r;r++)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r=0,o=e.length;o>r;r++)e.hasOwnProperty(r)&&t(e[r],r,e);else B(e,t,n)}function B(e,t,n){var r;if(n)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)e.hasOwnProperty(r)&&t(e[r],r,e)}function k(e){return"[object Arguments]"===Pr.call(e)?!0:!(!(null!==e&&"object"==typeof e&&z(e.callee)&&"number"==typeof e.length&&e.length>0)||Ur(e))}function H(e){return!!(e&&"object"==typeof e&&e.length>=0&&e.length===+e.length)}function F(e){return"boolean"==typeof e||"[object Boolean]"===Pr.call(e)}function W(e){return"[object Date]"===Pr.call(e)&&"Invalid Date"!==e.toString()&&!isNaN(e)}function q(e){return!(!e||9!==e.nodeType)}function G(e){return!(!e||1!==e.nodeType||!e.nodeName)}function Q(e){var t;if("[object Object]"===Pr.call(e)||"[object Array]"===Pr.call(e)){for(t in e)return!1;return!!e}return"string"==typeof e||"[object String]"===Pr.call(e)?!e.length:!1}function z(e){return"function"==typeof e}function Y(e){return"number"==typeof e&&e==Re(e)}function X(e){return null===e||e===t}function V(e){return null===e}function Z(e){return("number"==typeof e||"[object Number]"===Pr.call(e))&&isFinite(e)}function K(e){return!!e&&"[object Object]"===Pr.call(e)}function J(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()}function ee(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===e||"undefined"===t}function te(e){return e instanceof RegExp}function ne(e){return"string"==typeof e||"[object String]"===Pr.call(e)}function re(e){return e===t}function oe(e){return!!e&&!!e.alert&&!!e.document}function ae(t){var n,r,o=e.Zepto===e.TY?e.Zepto:null,a=t.success,i=t.error;return o&&"script"===t.dataType?(n=t.url,r=t.data,r=r&&"object"==typeof r?P(r):"string"===r?r:"",r.length>2&&(/\?/.test(n)?n=n.replace(/\&+$/,"")+"&":n+="?",n+=r),xt(function(e){o.loadUrl(n,function(t){t===!1?(i&&i.call(this,{status:408,message:"Timeout"}),e.reject({status:408,message:"Timeout"})):(a&&a.call(this,t),e.resolve(t))})})):St.ajax(t)}function ie(e,t){return ae({type:"GET",url:e,data:t,cache:!0,dataType:"json"})}function ce(e,t,n){var r,o="callback";return n=n||{},o=t.jsonp?t.jsonp:n.jsonp?n.jsonp:"_jcallback",r=t[o]?t[o]:n.jsonpCallback?n.jsonpCallback:"jsonpcb_"+ +new Date,delete t[o],ae({type:"GET",url:e,data:t,cache:!0,dataType:"jsonp",jsonp:o,jsonpCallback:r})}function se(e){var t=Dt.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,Dt.getElementsByTagName("head")[0].appendChild(t)}function ue(e,t){return ae({url:e,data:t,cache:!0,dataType:"script",scriptCharset:"utf-8"})}function le(n,r){var o=r["var"];return o||(r["var"]="_var_ds_data_"+ +new Date),xt(function(a){ae({url:n,data:r,cache:!0,dataType:"script",scriptCharset:"utf-8"}).done(function(){var n=e[o];null===n||n===t?a.reject({code:"500",messate:"数据未定义"}):a.resolve(n)}).fail(a.reject)})}function fe(e,t){return ae({type:"POST",url:e,data:t,cache:!0,dataType:"json",headers:{Accept:"application/json, text/javascript, */*; q=0.01"}})}function de(e,t){return e=be(e),0===e.length?"":e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+t)}function pe(e){return be(e).replace(/[-_]+(.)/gi,function(e,t){return t.toUpperCase()})}function he(e){return be(e).charAt(0).toUpperCase()+e.slice(1)}function me(e,t){return(!t||1>t)&&(t=3),e=be(e).split("."),e[0]=e[0].replace(new RegExp("(\\d)(?=(\\d{"+t+"})+$)","ig"),"$1,"),e.join(".")}function ge(e,t){return t="_"===t?t:"-",be(e).replace(/[A-Z]/g,function(e){return t+e.toLowerCase()}).replace(/[-_\s]+/g,t)}function _e(e){var t=String.fromCharCode;return be(e).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#([\d]+);/g,function(e,n){return t(parseInt(n,10))}).replace(/&#x([a-fA-F\d]+);/g,function(e,n){return t(parseInt(n,16))}).replace(/&amp;/g,"&")}function ve(e){return be(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}function Te(e){return null===e||e===t?"":(""+e).replace(/^[\s\xA0]+/,"")}function ye(e){if(null===e||e===t)return"";e+="";for(var n=/[\s\xA0]/,r=e.length-1;n.test(e.charAt(r));)r--;return e.slice(0,r+1)}function Oe(e){return ye(Te(e))}function Ee(e,t,n){var r,o,a,i;if(e=be(e),a=e,r=e.length,t=~~t,r>t/2)for(n=n||"…",a="",i=0,o=0;r>o;){if(e.charCodeAt(o)>128?i+=2:i++,i>=t){a+=n;break}a+=e.charAt(o),o++}return a}function Ie(e,t){var n="";if(0>e&&(n="-",e=-e),e=be(e),t=t||2,t>0)for(;e.length<t;)e="0"+e;else if(0>t)for(t=-t;e.length<t;)e+="0";return n+e}function be(e){return null===e||e===t?"":""+e}function we(e,t){return(!t||1>t)&&(t=3),e=(""+e).split("."),e[0]=e[0].replace(new RegExp("(\\d)(?=(\\d{"+t+"})+$)","ig"),"$1,"),e.join(".")}function Se(e){var t=e;return ne(e)?e.length<15&&(/^[-+]?(?:0|[1-9]\d{0,14})$/.test(e)?t=parseInt(e,10):/^[-+]?(?:0|[1-9]\d{0,14})\.\d{1,14}$/.test(e)&&(t=parseFloat(e))):Ur(e)?(t=[],L(e,function(e,n){t[n]=Se(e)})):J(e)&&(t={},B(e,function(e,n){t[n]=Se(e)})),t}function Ae(e,t){var n,r=arguments.length;return n=r>=2?Math.floor(Math.random()*(t-e)+e):r?e?Math.floor(Math.random()*e):0:Math.random()}function Ne(e,t){return t="number"==typeof t?t:2,"number"!=typeof e&&(e=parseFloat(e)),t>=0?e.toFixed(t):""+e}function Re(e){if(e===xr||e===-xr)return(0>e?-1:1)*jr;e=+e;var t=e%1;return e===e?t?e-t:e:0}function De(){for(var e=[],t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return e=parseInt(e.join(""),10)}function Pe(e,t,n,r){e&&ne(e)&&Yr.emit.apply(Yr,arguments)}function Ce(e){var t,n,r;J(e)&&z(e.send)&&Z(e.id)&&e.id>0&&ne(e.name)&&e.name&&(t=e.name,n=z(e.check)?e.check:a,r=z(e.format)?e.format:a,oo[t]={id:e.id,name:t,send:e.send,check:n,format:r})}function Ue(e){return oo[e]||null}function xe(e,n,r,o){function a(){if(o){var e=[],t=1,n=arguments.length;for(e[0]=m+arguments[0];n>t;t++)e.push(arguments[t]);o.emit.apply(o,e)}}function i(e){a.apply(null,e)}function c(e,t,n,r){e&&e.then?e.then(function(e){var o=f(e,t,n,r);return re(o)&&(o=e),t.code!==Jn?(a("fail",t,n,r),i(["end",t,e,n,r])):(a("success",o,n,r),i(["end",null,o,n,r])),o},function(e){return t.code=Z(e.code)?e.code:_r,a("fail",t,n,r),i(["end",t,null,n,r]),e}):a("end",t,null,n,r)}var s,u,l,f,d,p=Ue(e),h={code:Jn,message:""},m=e+":";o=o||zr,p?(u=p.check,l=p.send,f=p.format,s=p.check(n,h,r),h.code!==Jn?a("error",h,n,r):(s=s===t?n:s,a("begin",n,r),"order.create"===e?Fe(function(){d=l(s,h,r),c(d,h,n,r)}):(d=l(s,h,r),c(d,h,n,r)))):(h.code=404,h.message="api not found : "+e,a("404",h))}function je(e,t){var n;t.length&&("*"===e?n=st():(n=rt(e),n=n?[n]:[]),n.length?L(t,function(e){L(n,function(t){t.emit.apply(t,e)})}):alert(e))}function $e(e,t,n,r){var o={},a=0;return B(n,function(n,i){r[i]!==n&&(o[i]=n,e.push([t+"."+i+":change",n,r[i]]),a++)}),a>0&&e.push([t+":change",o,M(n)]),e}function Me(){Dt.domain=Mt,We(),ke(),He(),Pt(bt,0)}function Le(e,t){return function(){var n,r,o=[t];for(n=0,r=arguments.length;r>n;n++)o.push(arguments[n]);Be(e,o)}}function Be(e,t){var n=rt(e);if("*"===e)for(e in ao)n=rt(e),n&&n.emit.apply(n,t);else n=rt(e),n&&n.emit.apply(n,t)}function ke(){zr.on("load.wallet:begin",function(){_t("state",dn)}),zr.on("load.wallet:fail",function(e,t){_t("state",pn)}),zr.on("load.wallet:success",function(e){_t(x({},e,{state:fn}))}),zr.on("load.setting:begin",function(){vt("state",gn)}),zr.on("load.setting:fail",function(e,t){vt("state",_n)}),zr.on("load.setting:success",function(e){vt(x({},e,{state:mn}))}),B({wallet:Vr,setting:Zr},function(e,t){var n=t+":change";Jr[n]=Le("*",n),B(e,function(e,n){var r=t+"."+n+":change";Jr[r]=Le("*",r)})}),B(Jr,function(e,t){zr.on(t,e),eo[t]=0})}function He(){B({form:to,qrcode:ro,state:no},function(e,t){B(e,function(e,n){eo[t+"."+n+":change"]=0}),eo[t+":change"]=0}),L(["error","begin","fail","success","end"],function(e){eo["submit:"+e]=0,eo["load.props:"+e]=0,eo["load.QRUrl:"+e]=0}),eo["submit:retry"]=0}function Fe(e){ft()&&St(Dt).ready(function(){var t;t=Dt.createElement("iframe"),t.id=vr(),t.name=vr(),t.style.width="0px",t.style.height="0px",t.style.display="none",t.src=Wt+"/order/proxyPage.do?"+~~(1e5*Math.random()),t.onload=function(){return this.contentWindow&&(co=this.contentWindow),"function"==typeof e?e():void 0},Dt.body.appendChild(t)})}function We(){l({HTTP_STATIC:Lt,HTTP_SHANG:Wt,HTTP_BEI:qt}),"m"===Gt?(l("HTTP_BEI_RECHARGE",qt+"/deposit/m/toDeposit.do"),l("HTTP_BEI_PWD_SETTING",qt+"/wallet/m/secSet_pwdEmail.do"),l("HTTP_BEI_PWD_RESET",qt+"/wallet/m/secSet_findPwd.do"),l("HTTP_BEI_TANS_QUERY",qt+"/wallet/m/trade.do"),l("HTTP_SHANG_KNIGHT",Wt+"/jsp/v2/knight.html")):(l("HTTP_BEI_RECHARGE",qt+"/deposit/toDeposit.do"),l("HTTP_BEI_PWD_SETTING",qt+"/wallet/secSet_pwdEmail.do"),l("HTTP_BEI_PWD_RESET",qt+"/wallet/secSet_findPwd.do"),l("HTTP_BEI_TANS_QUERY",qt+"/wallet/transQuery.do"),l("HTTP_SHANG_KNIGHT",Wt+"/jsp/v2/knight.html")),l({MIN_PWD_LENGTH:Yt,MAX_PWD_LENGTH:Xt,MIN_AMOUNT_ONCE:Vt,MAX_AMOUNT_ONCE:Zt,PAY_TYB:tn,PAY_SHANG:nn,PAY_WX:rn,PAY_ALIPAY:on,ST_LOAD_NONE:an,ST_LOAD_SUCCESS:cn,ST_LOAD_BEGIN:sn,ST_LOAD_FAIL:un,ST_WALLET_NONE:ln,ST_WALLET_SUCCESS:fn,ST_WALLET_BEGIN:dn,ST_WALLET_FAIL:pn,ST_SETTING_NONE:hn,ST_SETTING_SUCCESS:mn,ST_SETTING_BEGIN:gn,ST_SETTING_FAIL:_n,ST_AMOUNT_OK:vn,ST_AMOUNT_ERROR:Tn,ST_AMOUNT_TOO_LESS:yn,ST_AMOUNT_TOO_MUCH:On,ST_AMOUNT_NOT_ENOUGH:En,ST_AMOUNT_NOT_ENOUGH_TYB:In,ST_AMOUNT_NOT_ENOUGH_SHANG:bn,ST_PWD_NONE:wn,ST_PWD_INPUT_OK:Sn,ST_PWD_INPUT_EMPTY:An,ST_PWD_INPUT_TOO_SHORT:Nn,ST_PWD_INPUT_TOO_LONG:Rn,ST_PWD_INPUT_ERROR:Dn,ST_SUBMIT_ENABLE:Pn,ST_SUBMIT_DISABLE:Cn,ST_SUBMIT_DISABLE_AMOUNT:Un,ST_SUBMIT_DISABLE_PWD:xn,ST_SUBMIT_DISABLE_BEGIN:jn,ST_SUBMIT_DISABLE_NO_PSW:$n,ST_ORDER_NONE:Mn,ST_ORDER_CREATE_BEGIN:Ln,ST_ORDER_CREATE_SUCCESS:Bn,ST_ORDER_CREATE_FAIL:kn,ST_ORDER_LOAD_BEGIN:Hn,ST_ORDER_LOAD_SUCCESS:Fn,ST_ORDER_LOAD_FAIL:Wn,ST_NO_PWD_CLOSE:Gn,ST_NO_PWD_ENABLE:qn,ST_NO_PWD_DISABLE:Qn,ST_QRCODE_NONE:zn,ST_QRCODE_LOAD_SUCCESS:Yn,ST_QRCODE_LOAD_BEGIN:Xn,ST_QRCODE_LOAD_FAIL:Vn,CODE_OK:Jn,CODE_REQ_ERROR:er,CODE_REQ_AMOUNT_ERROR:tr,CODE_REQ_ORDER_ID_EMPTY:nr,CODE_AUTH_ERROR:rr,CODE_AUTH_NOT_LOGIN:or,CODE_AUTH_PWD_ORDER:ar,CODE_AUTH_PWD_ORDER:ar,CODE_AUTH_NOT_YOUR_ORDER:ir,CODE_DATA_TYPE_ERROR:cr,CODE_DATA_CODE_ERROR:sr,CODE_DATA_BODY_ERROR:ur,CODE_DATA_ORDER_ID_ERROR:lr,CODE_DATA_ORDER_STATUS_ERROR:fr,CODE_DATA_ORDER_IS_SYNCING:dr,CODE_DATA_ORDER_TIMEOUT:pr})}function qe(e,n){if(!ne(e)||!/^[\w\.]{1,20}$/.test(e))return wt(Rr,"appName is error : "+e),null;if(ao.hasOwnProperty(e))return wt(Rr,"appName is used : "+e),null;var r,o,a,i={},c=N(e,!0),s={qrcode:!1},u=M(ro),l=M(to),f=M(no),d={},p={},h={},m={};return ao[e]={name:e,app:i,emitter:c,setters:{form:d,qrcode:p},state:f,cache:{config:s,form:l,qrcode:u}},d.amount=function(e){e=parseFloat(e)||0,l.amount=e},d.tybPwd=function(e){l.tybPwd=e},d.channel=function(e){l.channel=e},d.noPwdFlag=function(e){l.noPwdFlag=e},d._m_=function(e){l._m_=e},p.channel=function(e){/^(?:alipay|wx)$/.test(e)&&(u.channel=e)},h.wallet=function(t){f.wallet=t,f.amount=Ve(e)},h.amount=function(t){f.amount=t,f.tybPwd=Ke(e)},h.noPwdFlag=function(t){f.noPwdFlag=t,f.tybPwd=Ke(e)},i.init=function(e){},i.get=function(n,r,o){var a;return a=nt(e,n,r),a=a===t?o:a},i.set=function(t,n,r){var o=dt(n,r);if(o)switch(t){case"form":return B(o,function(e,t){m.hasOwnProperty(t)&&delete o[t]}),yt(e,o);case"wallet":return mt(e,t,o);case"qrcode":if(o.hasOwnProperty("channel"))return Tt(e,{state:Kn,channel:o.channel})}},i.submit=function(){Xe(e,l)},i.load=Ye,i.load.autoLoad=Ge,i.free=function(){var t=ao[e];t&&t.app===this&&(B(Jr,function(e,t){zr.off(t,e)}),delete ao[e])},n&&(n.form&&(m=x({},n.form)),r=x({},n.wallet),r.userId>0&&Z(r.bei)&&(r.state=fn,B(r,function(e,t){Vr.hasOwnProperty(t)&&(Vr[t]=e)})),o=x({},n.setting),o.user_onlyid>0&&(o.userId=o.user_onlyid,delete o.user_onlyid),o.userId>0&&Z(o.no_pwd_flag)&&(o.state=mn,B(o,function(e,t){Zr.hasOwnProperty(t)&&(Zr[t]=e)})),"pc"===Gt&&n.useQRCode===!0&&(s.qrcode=!0),a=n.useProps,Ur(a)?a=a.join():ne(a)||(a=""),a=a.replace(/\s/g,"").replace(/,+$/g,""),a&&/^\d+[,\d]*$/.test(a)?(m.amount=0,delete m.propId,delete m.propNum):(delete m.amount,m.propId=0,m.propNum=0),delete m.noPwdFlag,yt(e,m),!a&&m.propId>0&&(a=""+m.propId),a&&Pt(function(){xe("load.props",{propIds:a},{},c)},0)),L(["on","off","once"],function(e){i[e]=function(t,n){return/^#\w+/.test(t)?Yr[e].apply(Yr,arguments):eo.hasOwnProperty(t)?c[e].apply(c,arguments):alert("unregister event :"+t),this}}),Qe(e,i),ze(e,i),Pt(Ge,0),i}function Ge(){Vr.userId<1&&(Ye("wallet",{},{cache:!0}),zr.once("load.wallet:end",function(){Zr.userId<1&&Ye("setting",{},{cache:!0})}))}function Qe(e,t){function n(t,r,o){var a=rt(e);a&&o.appName==e?a.emit("submit:error",t,r,o):zr.off("order.create:error",n)}function r(t,n){var o=rt(e);o&&n.appName==e?(Ot(e,{order:Ln}),o.emit("submit:begin",t,n)):zr.off("order.create:begin",r)}function o(t,n,r,a){var i=rt(e);i&&a.appName==e?t?(Ot(e,{order:kn}),i.emit("submit:fail",t,r,a)):r.channel===tn||r.channel===nn?(Ot(e,{order:Hn}),xe("order.load",{orderId:n.orderId},{appName:e,expTime:(new Date).getTime()+45e3})):(Ot(e,{order:Bn}),i.emit("submit:success",n,r,a)):zr.off("order.create:end",o)}function a(t,n,r,o){var i=rt(e);if(i&&o.appName==e)if(t){if(t.code===dr){if(o.expTime>$r.now())return o.tempOrderId?i.emit("qrcode.scan:retry",o):(i.emit("submit:retry",{orderId:r.orderId},M(r),M(o)),Pt(function(){xe("order.load",r,o)},3e3));t.code=pr}Ot(e,{order:Wn}),i.emit("submit:fail",t,n,r,o)}else Ot(e,{order:Fn}),i.emit("submit:success",n,r,o);else zr.off("order.load:end",a)}function i(){Pt(function(){ht(e)},0)}zr.on("order.create:error",n),zr.on("order.create:begin",r),zr.on("order.create:end",o),zr.on("order.load:end",a),t.on("state.order:change",i),t.on("form:change",function(t){var n,r,o="",a=["propId","propNum","amount","channel"];for(n=0,length=a.length;n<length;n++)if(o=a[n],t.hasOwnProperty(o)){r=e+"-change-"+o;break}r&&Pt(function(){Et(r,"set")},25)}),L(["error","begin","success","fail"],function(n){t.on("submit:"+n,function(){Pt(function(){Et(e+"-submit-"+n,"submit")},25)})})}function ze(e,t){function n(){u&&clearTimeout(u);var t=lt(e,d++);t&&(c.tempOrderId=t,u=Pt(function(){if(u=null,c.tempOrderId===t){var n=ut(e);n.tempOrderId=t,xe("load.QRUrl",n,{appName:e})}},25))}function r(e){var t,n,r,a,i=e.tempOrderId;o(),i&&(e.orderId?(r="order.load",n={orderId:e.orderId},t=Jt):(r="order.check",n={tempOrderId:e.tempOrderId},t=Kt),a=$r.now()-e.expTime,a>0&&(t*=2+Math.ceil(a/en)),l=Pt(function(){l=null,e.tempOrderId===i&&xe(r,n,e)},t))}function o(){l&&(clearTimeout(l),l=null)}function a(t,n,o,a){var i=rt(e);i&&a.appName==e&&(t?r(a):(a.orderId=n.orderId,a.expTime=(new Date).getTime()+en,r(a)))}var i,c,s,u,l,f=at(e,"config"),d=0;f.qrcode===!0&&(i=rt(e),c=at(e,"qrcode"),s=ut(e),delete s.channel,t.on("form:change",function(t,n){var r=0;B(t,function(e,t){s.hasOwnProperty(t)&&(r++,s[t]=e)}),r>0&&Tt(e,{state:Zn})}),zr.on("load.QRUrl:success",function(t,n,r){r.appName===e&&c.tempOrderId===n.tempOrderId&&Tt(e,{state:Yn,src:t.src})}),zr.on("load.QRUrl:fail",function(t,n,r){r.appName===e}),t.on("qrcode:change",function(t,o){o.state===Yn?r({appName:e,tempOrderId:o.tempOrderId,orderId:"",expTime:(new Date).getTime()+en}):o.state===Xn&&n()}),zr.on("order.check:end",a),i.on("qrcode.scan:retry",function(e){r(e)}))}function Ye(e,t,n){var r,o,a;if(z(io[e])){for(r=[],o=1,a=arguments.length;a>o;o++)r.push(arguments[o]);io[e].apply(null,r)}}function Xe(e,t){var n=rt(e);n&&xe("order.create",t,{appName:e})}function Ve(e){var t=at(e,"form"),n=Math.round(100*t.amount)/100;return t.amount=n,n>0?Vt>n?yn:n>Zt?On:t.channel===tn?Vr.bei>=n?vn:In:t.channel===nn?et(Vr.shang)>=n?vn:bn:vn:Tn}function Ze(e){var t=at(e,"form"),n=Zr.no_pwd_flag,r=(t.tybPwd,Zr.each_limits);return 1===n?t.amount<=r?qn:Qn:Gn}function Ke(e){var t,n=at(e,"form"),r=n.channel,o=n.tybPwd;return r===tn||r===nn?(t=Ze(e),t===qn?wn:o?o.length<Yt?Nn:o.length>Xt?Rn:Sn:An):wn}function Je(e){var t,n=Ve(e);return n!==vn?Un:(t=it(e),n=t.order,n===Ln||n===Hn?jn:Vr.hasSetWalletPassword===!1?$n:(n=Ke(e),n!==Sn&&n!==wn?xn:Pn))}function et(e){return parseFloat((e/100).toFixed(2))}function tt(e){}function nt(e,t,n){var r,o=at(e,t);return o="wallet"===t?Vr:"account"===t?Xr:"setting"===t?Zr:at(e,t),o&&(ne(n)?r=M(o[n]):J(n)?(r={},B(n,function(e,t){r[t]=o.hasOwnProperty(t)?M(o[t]):e})):re(n)&&(r=M(o))),r}function rt(e){var t=ao[e];return t&&t.emitter?t.emitter:null}function ot(e,t){var n,r=ao[e];return r&&r.setters&&(n=r.setters,t&&n&&(n=n[t])),n}function at(e,t){var n,r=ao[e];return r&&r.cache&&(n=r.cache,n&&t&&(n=n[t])),n}function it(e){var t=ao[e];return t&&t.hasOwnProperty("state")?t.state:null}function ct(e){var t=[];return e&&"*"!==e?ao.hasOwnProperty(e)&&t.push(e):B(ao,function(e,n){t.push(n)}),t}function st(){var e=[];return B(ao,function(t,n){t.emitter&&e.push(t.emitter)}),e}function ut(e){var t=at(e,"form"),n=at(e,"qrcode"),r=x({},t);return delete r.tybPwd,delete r.fowardURL,delete r.noPwdFlag,delete r.ext3,B(r,function(e,t){""===e&&delete r[t]}),r.channel=n.channel,r.doUserId=Xr.userId,r.doUserName=Xr.userName,r.mtime=n.mtime,r}function lt(e,t){var n,r,o="";return Xr.userId>0&&(n=at(e,"qrcode"),n&&n.channel&&(t=t>0?t:0,r=$r.now()+t,o=n.channel+"-"+Xr.userId+"-"+r)),o}function ft(){return jt!=="shang."+Mt}function dt(e,t){var n;return J(e)?n=e:ne(e)&&(n={},n[e]=t),n}function pt(e,t){var n=ct(e);n.length&&L(n,function(e){var t=it(e);t&&(t.amount=Ve(e),t.tybPwd=Ke(e),t.submit=Je(e))})}function ht(e){var t=ct(e);t.length&&L(t,function(e){var t,n,r,o,a=it(e);a&&(o="state",t=M(a),a.amount=Ve(e),a.tybPwd=Ke(e),a.submit=Je(e),r=[],n={},B(a,function(e,a){t[a]!==e&&(r.push([o+"."+a+":change",e,t[a]]),n[a]=e)}),r.length&&(r.push([o+":change",n,M(a)]),je(e,r)))})}function mt(e,t,n){var r,o,a,i,c,s;n&&(o=at(e,t),i=it(e),o&&i&&(a=M(o),s=ot(e,t)||{},B(n,function(e,t){o.hasOwnProperty(t)&&(z(s[t])?s[t](e,t,o):o[t]=e)}),n={},r=[],B(o,function(e,o){a[o]!==e&&(n[o]=e,r.push([t+"."+o+":change",e,a[o]]))}),r.length&&(r.push([t+":change",n,M(o)]),c=M(i),pt(e),$e(r,"state",i,c),je(e,r))))}function gt(e,t,n,r,o){var a=M(t);return o=o||{},B(n,function(e,n){t.hasOwnProperty(n)&&(z(o[n])?o[n](e,n,t):t[n]=e)}),n={},B(t,function(t,o){a[o]!==t&&(n[o]=t,r.push([e+"."+o+":change",t,a[o]]))}),r.length&&r.push([e+":change",n,M(t)]),r}function _t(e,t){var n=dt(e,t),r=[];n&&(gt("wallet",Vr,n,r),je("*",r),ht("*"))}function vt(e,t){var n=dt(e,t),r=[];n&&(gt("setting",Zr,n,r),je("*",r),ht("*"))}function Tt(e,t){var n=t.state,r={state:zn,src:""},o=at(e,"form");at(e,"qrcode");return n===Kn?(r.channel=t.channel,n=Xn):n===Zn&&(r.amount=o.amount,n=Xn),n===Yn?r.src=t.src:n===Vn?r.src=Bt+"ds/v2/img/pc/prop/face_cry.png":(r.src=Bt+"ds/v2/img/pc/prop/face_cry.png",n===Xn?n===Xn?(r.amount=o.amount,r.src=Bt+"ds/v2/img/pc/prop/loading.gif"):(n=zn,r.amount=o.amount,r.tempOrderId=""):r.tempOrderId=""),r.state=n,r.amount=o.amount,mt(e,"qrcode",r)}function yt(e,t){var n,r,o=t.propId,a=t.propNum;return(o>0||a>0)&&Kr&&(n=at(e,"form"),o=o>0?o:n.propId,r=Kr[o],r&&(a=a>0?a:n.propNum,a=a>0?a:1,t.propId=o,t.propNum=a,t.amount=r.beiAmount*a)),mt(e,"form",t)}function Ot(e,t,n){var r=dt(t,n),o=[];r&&(o=ct(e),o.length&&L(o,function(e){var t=it(e),n=[];t&&(gt("state",t,r,n),je(e,n))}))}function Et(t,n,r,o){var a=arguments.length,i=e._hmt;i&&i.push&&a>1&&(t=Gt+"-"+t,2===a?i.push(["_trackEvent",t,n]):3===a?i.push(["_trackEvent",t,n,r]):i.push(["_trackEvent",t,n,r,o]),It(t))}function It(e){var t=Dt.createElement("img");t.src="//collect.tianya.cn/newAccess.jsp?"+$r.o2q({p:e}),t.onload=t.onerror=function(){try{Dt.body.removeChild(this)}catch(e){}},Dt.body.appendChild(t)}function bt(){}var wt,St=e.TY||e.jQuery||e.Zepto,At=e.__global,Nt=e.TYDSApi;if(At&&St&&Nt&&"function"!=typeof Nt.create){var Rt=(e.top,e.location),Dt=e.document,Pt=(e.navigator,e.setTimeout),Ct=e.escape,Ut=e.unescape,xt=St.Deferred,jt=Rt.hostname,$t=Rt.pathname,Mt="";if(/\.(tianya\.cn|hainan\.net)$/.test(jt)){Mt=RegExp.$1;var Lt="//static.tianyaui.com",Bt=Lt+"/global/dashang/",kt=Lt+"/global/data/shang/",Ht="props_all",Ft=kt+Ht+".js",Wt="//shang."+Mt,qt="//bei.tianya.cn",Gt=/\/m\//.test($t)?"m":"pc",Qt=Wt+"/order/scanQRCodeForPlaceOrder.do",zt="//imgcode."+Mt+"/services/QrCodeService",Yt=6,Xt=20,Vt=.1,Zt=2e5,Kt=1e4,Jt=3e3,en=3e5,tn="tyb",nn="shang",rn="wx",on="alipay",an=0,cn=1,sn=2,un=3,ln=0,fn=1,dn=2,pn=3,hn=0,mn=1,gn=2,_n=3,vn=1,Tn=10,yn=11,On=12,En=20,In=21,bn=21,wn=0,Sn=1,An=10,Nn=11,Rn=12,Dn=22,Pn=1,Cn=2,Un=21,xn=22,jn=23,$n=26,Mn=0,Ln=10,Bn=11,kn=12,Hn=20,Fn=21,Wn=22,qn=1,Gn=0,Qn=2,zn=0,Yn=1,Xn=2,Vn=3,Zn=11,Kn=11,Jn=0,er=100,tr=100101,nr=100201,rr=401,or=401001,ar=401002,ir=401003,cr=404,sr=404001,ur=404100,lr=404101,fr=404102,dr=404103,pr=404104,hr=404201,mr=500100,gr=500200,_r=501,vr=function(){return"_ds_proxy_"+n()},Tr=21,yr=22,Or=23,Er=24,Ir=25,br=26,wr=27,Sr=400;NOT_IN_LIVE=!0;var Ar=1,Nr=2,Rr=3,Dr=Nr;wt=function(t,n){e.console;t===!0?(Dr=n>Ar?n:Ar,r(Ar,"debug level:"+Dr)):t>=Dr&&r(t,n)};var Pr=Object.prototype.toString,Cr=(Object.prototype.hasOwnProperty,Array.prototype.slice),Ur=(Array.prototype.concat,Array.isArray||function(e){return"[object Array]"===Pr.call(e)}),xr=1/0,jr=1e308,$r={},Mr={},Lr=function(){function e(t,n){var r;return t&&"object"==typeof t?h(t,function(t,n){e(n,t)}):"function"==typeof n||"string"==typeof n?(r=typeof n,/^(?:function|string|number|boolean)$/.test(r)&&(g[t]=n)):null===n&&delete g[t],this}function n(e){return e.replace(O,"").replace(E,",").replace(I,"").replace(b,"").replace(w,"").split(S)}function r(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function o(e,t){function o(e){return d+=e.split(/\n/).length-1,l&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=_[1]+r(e)+_[2]+"\n"),e}function a(e){var r=d;if(u?e=u(e,t):i&&(e=e.replace(/\n/g,function(){return d++,""})),0===e.indexOf("=")){var o=f&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),o){var a=e.replace(/\s*\([^\)]+\)/,"");m[a]||/^(include|print)$/.test(a)||(e="$escape("+e+")")}else e="$string("+e+")";e=_[1]+e+_[2]}return i&&(e="$line="+r+";"+e),T(n(e),function(e){if(e&&!p[e]){var t;t="print"===e?y:"include"===e?O:m[e]?"$utils."+e:g.hasOwnProperty(e)?"$helpers."+e:"$data."+e,E+=e+"="+t+",",p[e]=!0}}),e+"\n"}var i=t.debug,c=t.openTag,s=t.closeTag,u=t.parser,l=t.compress,f=t.escape,d=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},h="".trim,_=h?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=h?"$out+=text;return $out;":"$out.push(text);",y="function(){var text=''.concat.apply('',arguments);"+v+"}",O="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+v+"}",E="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(i?"$line=0,":""),I=_[0],b="return new String("+_[3]+");";T(e.split(c),function(e){e=e.split(s);var t=e[0],n=e[1];1===e.length?I+=o(t):(I+=a(t),n&&(I+=o(n)))});var w=E+I+b;i&&(w="try{"+w+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+r(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var S=new Function("$data","$filename",w);return S.prototype=m,S}catch(A){throw A.temp="function anonymous($data,$filename) {"+w+"}",A}}var a=function(e,t){return"string"==typeof t?v(t,{filename:e}):s(e,t)};a.version="3.0.0",a.config=function(e,t){i[e]=t};var i=a.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},c=a.cache={},s=a.renderFile=function(e,t){var n=a.get(e)||_({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};a.get=function(e){var t;if(c[e])t=c[e];else if("object"==typeof Dt){var n=Dt.getElementById(e);if(n){var r=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=v(r,{filename:e})}}return t};var u=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?u(e.call(e)):""),e},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},f=function(e){return l[e]},d=function(e){return u(e).replace(/&(?![\w#]+;)|[<>"']/g,f)},p=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},h=function(e,t){var n,r;if(p(e))for(n=0,r=e.length;r>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},m=a.utils={$helpers:{},$include:s,$string:u,$escape:d,$each:h};a.helper=e;var g=a.helpers=m.$helpers;a.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="["+n+"]\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var _=function(e){var t=e.message||"",n=e.filename;return a.onerror(e),function(){return n+" : "+t}},v=a.compile=function(e,n){function r(t){try{return new a(t,l)+""}catch(r){return n.debug?_(r)():(n.debug=!0,v(e,n)(t))}}var a,s="";n=n||{};for(var u in i)n[u]===t&&(n[u]=i[u]);var l=n.filename;try{a=o(e,n)}catch(f){return s+=f,f.filename=l||"anonymous",f.name="Syntax Error",f.message=s,_(f)}return r.prototype=a.prototype,r.toString=function(){return a.toString()},l&&n.cache&&(c[l]=r),r},T=m.$each,y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",O=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,E=/[^\w$]+/g,I=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),b=/^\d[^,]*|,\d[^,]*/g,w=/^,+|,+$/g,S=/^$|,+/;return a}(),Br=Lr.compile,kr=Lr.helper,Hr=Lr.renderFile;kr({now:D,delay:o,identity:a,isArray:Ur,isBoolean:F,isDate:W,isFunction:z,isNull:V,isNumber:Z,isObject:K,isRegExp:te,isString:ne,isUndefined:re,isPlain:J,isArguments:k,isArrayLike:H,isDocument:q,isElement:G,isEmpty:Q,isInteger:Y,isNothing:X,isPrimitive:ee,isWindow:oe,assign:x,clone:M,forEach:L,forIn:B,trim:Oe,trimLeft:Te,trimRight:ye,camelize:pe,dasherize:ge,capitalize:he,zeroize:Ie,commaify:me,truncate:Ee,adjacent:de,decodeHTML:_e,encodeHTML:ve,numberify:Se,commaize:we,toFixed:Ne,toInteger:Re,random:Ae,o2q:P,q2o:U,render:i}),kr({Boolean:Boolean,Date:Date,Math:Math,Number:Number,String:String,RegExp:RegExp,ceil:Math.ceil,floor:Math.floor,round:Math.round,abs:Math.abs,cos:Math.cos,acos:Math.acos,sin:Math.sin,asin:Math.asin,pow:Math.pow,min:Math.min,max:Math.max,sqrt:Math.sqrt,exp:Math.exp,tan:Math.tan,atan:Math.atan,decodeURI:decodeURI,decodeURIComponent:decodeURIComponent,encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escape:Ct,unescape:Ut,isNaN:isNaN,isFinite:isFinite,parseInt:parseInt,parseFloat:parseFloat}),s.version=Lr.version,s.compile=c,s.render=i,s.helper=kr,s.get=Lr.get,s.Defaults=Lr.defaults,s.Helpers=Lr.helpers,s.Cache=Lr.cache;var Fr={},Wr=(function(){var t=e.navigator,n=e.screen,r={ua:o,device:"",os:"",browser:""},o=t.userAgent,a="",i="";return r.ua=o,r.width=n.width,r.height=n.height,r.isMobile=/mobile/i.test(o),r.isAndroid=/Android/i.test(o)||/Adr/.test(o),r.isIOS=/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(o),r.iPhone=/iphone/i.test(o),
r.iPod=/ipod/i.test(o),r.iPad=/ipad/i.test(o),r.isIE=/msie \d(\.\d)?/i.test(o),r.isChrome=/chrome\//i.test(o)&&!/edge\//i.test(o),r.isSafari=/AppleWebKit/i.test(o)&&/safari/i.test(o)&&!/chrome\//i.test(o),r.isWeiXin=/MicroMessenger\//i.test(o),r.isFirefox=/firefox\//i.test(o),r.isEdge=/edge\//i.test(o),r.isQQBrowser=/qqbrowser\//i.test(o),r.isIE?a="msie":r.isChrome?a="chrome":r.isSafari?a="safari":r.isWeiXin?a="weixin":r.isFirefox?a="firefox":r.isEdge?a="edge":r.isQQBrowser&&(a="qqbrowser"),r.isMobile&&(r.device="mobile"),r.isAndroid?i="android":r.isIOS?i="ios":/Windows/i.test(o)&&(i="windows"),r.browser=a,r.os=i,r}(),/(%[0-9A-Z]{2})+/g);S.get=function(){},S.set=S.remove=S.clear=function(){return this},S.length=function(){return 0},function(e){var n,r=e.ActiveXObject,o=e.document;!function(){if("localStorage"in e)try{return void(n=e.localStorage)}catch(a){}var i,c,s=o.getElementsByTagName("head")[0],u=e.location.hostname||"localStorage",l=new Date;if(s.addBehavior){try{c=new r("htmlfile"),c.open(),c.write('<script>document.w=window;</script><iframe src="/favicon.ico"></iframe>'),c.close(),i=c.w.frames[0].document,s=i.createElement("head"),i.appendChild(s)}catch(a){s=o.getElementsByTagName("head")[0]}try{l.setDate(l.getDate()+36500),s.addBehavior("#default#userData"),s.expires=l.toUTCString(),s.load(u),s.save(u)}catch(a){return}var f,d;try{f=s.XMLDocument.documentElement,d=f.attributes}catch(a){return}var p="p__hack_",h="x-_-s",m=new RegExp("^"+p),g=new RegExp(h,"g"),_=function(e){return encodeURIComponent(p+e).replace(/%/g,h)},v=function(e){return decodeURIComponent(e.replace(g,"%")).replace(m,"")};n={length:d.length,isVirtualObject:!0,getItem:function(e){return(d.getNamedItem(_(e))||{nodeValue:null}).nodeValue||f.getAttribute(_(e))},setItem:function(e,t){try{f.setAttribute(_(e),t),s.save(u),this.length=d.length}catch(n){}},removeItem:function(e){try{f.removeAttribute(_(e)),s.save(u),this.length=d.length}catch(t){}},clear:function(){for(;d.length;)this.removeItem(d[0].nodeName);this.length=0},key:function(e){return d[e]?v(d[e].nodeName):t}},"localStorage"in e||(e.localStorage=n)}else try{n=e.localStorage}catch(a){n=null}}(),n&&(S.set=function(e,r){return S.get(e)!==t&&S.remove(e),n.setItem(e,r),this},S.get=function(e){var r=n.getItem(e);return null===r?t:r},S.remove=function(e){return n.removeItem(e),this},S.clear=function(){return n.clear(),this},S.length=function(){return n.length})}(e);var qr="function"!=typeof Object.create?"~":!1;N.prototype.listeners=function(e,t){var n=qr?qr+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,i=new Array(a);a>o;o++)i[o]=r[o].fn;return i},N.prototype.emit=function(e,n,r,o,a,i){var c=qr?qr+e:e,s=this.name||"";if(!this._events||!this._events[c])return this.debug&&wt(Ar,s+"  "+e+"    listeners: 0"),!1;var u,l,f=this._events[c],d=arguments.length;if(this.debug&&wt(Ar,s+"  "+e+"    listeners: "+(f.fn?1:f.length)),f.fn){switch(f.once&&this.off(e,f.fn,t,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,n),!0;case 3:return f.fn.call(f.context,n,r),!0;case 4:return f.fn.call(f.context,n,r,o),!0;case 5:return f.fn.call(f.context,n,r,o,a),!0;case 6:return f.fn.call(f.context,n,r,o,a,i),!0}for(l=1,u=new Array(d-1);d>l;l++)u[l-1]=arguments[l];f.fn.apply(f.context,u)}else{var p,h=f.length;for(l=0;h>l;l++)switch(f[l].once&&this.off(e,f[l].fn,t,!0),d){case 1:f[l].fn.call(f[l].context);break;case 2:f[l].fn.call(f[l].context,n);break;case 3:f[l].fn.call(f[l].context,n,r);break;case 4:f[l].fn.call(f[l].context,n,r,o);break;default:if(!u)for(p=1,u=new Array(d-1);d>p;p++)u[p-1]=arguments[p];f[l].fn.apply(f[l].context,u)}}return!0},N.prototype.on=function(e,t,n){var r=new A(t,n||this),o=qr?qr+e:e;return this._events||(this._events=qr?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},N.prototype.once=function(e,t,n){var r=new A(t,n||this,!0),o=qr?qr+e:e;return this._events||(this._events=qr?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},N.prototype.off=R;var Gr=/%20/g,Qr=/\[\]$/;x($r,{now:D,delay:o,identity:a,isArray:Ur,isBoolean:F,isDate:W,isFunction:z,isNull:V,isNumber:Z,isObject:K,isRegExp:te,isString:ne,isUndefined:re,isPlain:J,isArguments:k,isArrayLike:H,isDocument:q,isElement:G,isEmpty:Q,isInteger:Y,isNothing:X,isPrimitive:ee,isWindow:oe,getConst:f,setConst:l,assign:x,clone:M,forEach:L,forIn:B,trim:Oe,trimLeft:Te,trimRight:ye,camelize:pe,dasherize:ge,capitalize:he,zeroize:Ie,commaify:me,truncate:Ee,adjacent:de,decodeHTML:_e,encodeHTML:ve,numberify:Se,commaize:we,toFixed:Ne,toInteger:Re,random:Ae,o2q:P,q2o:U}),x(Mr,{g:_,dataset:h,setValue:v,setHtml:T,getValue:m,getHtml:g,getCookie:I,setCookie:b,removeCookie:w,getStore:S.get,setStore:S.set,removeStore:S.remove,clearStore:S.clear,loadCss:se,loadJs:ue,loadVar:le,postJSON:fe,getJSON:ie,getJSONP:ce});var zr=N("api"),Yr=N("action",!0),Xr={userId:At.getUserId()||"",userName:At.getUserName()||""},Vr={state:ln,userId:0,bei:0,shang:0,hasSetWalletPassword:!0},Zr={state:hn,userId:0,month_limits:1e3,day_limits:500,month_total:0,day_total:0,each_limits:500,no_pwd_flag:0},Kr=null,Jr={},eo={},to={amount:0,propId:0,propNum:0,channel:tn,tybPwd:"",merId:"",merNum:"",getName:"",getUserId:0,getId:0,realName:"",time:"",ext1:"",ext2:"",ext3:"",ext4:"",sign:"",fowardURL:"",noPwdFlag:"",_m_:"",token:""},no={amount:Tn,tybPwd:An,submit:Cn,order:Mn},ro={state:zn,src:"",amount:0,channel:on,tempOrderId:""},oo={},ao={},io={},co=null;St(Dt).ready(function(){function e(e){var t,n=e.type,o=this.getAttribute("x-"+e.type);!o&&r[n]&&(o=this.getAttribute("x-"+r[n])),o&&(t=d(this),t=Se(t),Pe("#"+o,t,e,this))}var t=["click"],n=["*[x-click]"],r={focus:"focusin",focusin:"focus",blur:"focusout",focusout:"blur"},o=St(Dt.body);L(["keyup","keydown","focus","blur","focusin","focusout"],function(e){t.push(e),n.push("input[x-"+e+"]"),n.push("textarea[x-"+e+"]")}),t.push("change"),n.push("select[x-change]"),n.push("input[x-change]"),n.push("textarea[x-change]"),t=t.join(" "),n=n.join(","),z(o.on)?o.on(t,n,e):z(o.delegate)&&o.delegate(n,t,e)}),io.wallet=function(e){xe("load.wallet",{},{})},io.setting=function(e){xe("load.setting",{},{})},Ce({id:wr,name:"load.props",check:function(e,t){return e.propIds?e["var"]="_props_data_":t.code=CORDE_CONFIG_PROP_IDS,e},send:function(e,t){return J(Kr)&&t.cache!==!1?xt(function(e){e.resolve(Kr)}):le(Ft,e)},format:function(e,t,n){var r=Jn,o=n.propIds.split(/\D+/),a=[],i={};return J(e)?(Kr=e,L(o,function(t){var n=e[t];J(n)&&!i.hasOwnProperty(t)&&(n.propId=t,n.propNo=$r.zeroize(n.propId,3),n.shangAmount=n.shangAmount>0?n.shangAmount:0,n.beiAmount=et(n.shangAmount),n=M(n),i[t]=n,a.push(n))}),a.length||(r=hr)):r=cr,r===Jn?t.message="道具加载成功":(t.code=r,t.message=tt(r)),{list:a,map:i}}}),Ce({id:br,name:"load.QRUrl",check:function(e,t){return e=x(e,{ext3:"qrcode"})},send:function(e,t){var n;return n=Qt+"?"+P(e),e=x({},{method:"ds.assist.getShortUrl",lUrl:n,"var":"_ds_qrurl_"+$r.now()}),le(Wt+"/api/call.do",e)},format:function(e,t){var n,r=Jn,o="";return e?"1"!==e.code?r=sr:(n=e.data,J(n)?n.sUrl?n.src=zt+"?"+P({s:5,t:n.sUrl}):r=Sr+1:r=Sr):r=cr,r===Jn?(t.message="二维码短链接加载成功",e=n):(r=De(br,r),t.code=r,t.message=o||tt(r),t.data=e),n}}),Ce({id:Ir,name:"load.setting",check:function(e,t){return x(e,{method:"wallet.secure.self.getSetupInfo","var":"_varSettingSetting_",_t_:+new Date}),e},send:function(e,t){return le(qt+"/api/call.do",e)},format:function(e,t){var n;return J(e)?J(e.data)?(n=e.data,n.user_onlyid>0&&(n.userId=n.user_onlyid,delete n.user_onlyid)):n=e:t.code=cr,J(n)&&n.userId>0&&Z(n.no_pwd_flag)?e=M(n):t.code=ur,t.message=tt(t.code),e}}),Ce({id:Er,name:"load.wallet",check:function(e,t){return x(e,{method:"wallet.api.baseInfo",selType:"shang",hasSecure:!0,"var":"_varWalletBaseInfo_",_t_:+new Date}),e},send:function(e,t){return le(qt+"/api/call.do",e)},format:function(e,t){var n;return J(e)?n=J(e.data)?e.data:e:t.code=cr,J(n)&&n.userId>0&&Z(n.bei)?e=M(n):t.code=ur,t.message=tt(t.code),e}}),Ce({id:Or,name:"order.check",check:function(e,t){return e.tempOrderId&&/^(\w+)\-(\d+)\-(\d{13,})$/.test(e.tempOrderId)||(t.code=100),e},send:function(e,t){return e=x(e,{method:"ds.api.checkOrderByQRCode","var":"_ds_check_"+$r.now()}),le(Wt+"/api/call.do",e)},format:function(e,t){var n,r=Jn,o="";return e?"1"!==e.code?(r=sr,o=e.message||"CODE:"+e.code):(n=e.data,J(n)?n.orderId||(r=lr):r=ur):r=cr,r===Jn?t.message="临时订单加载成功":(t.code=r,t.message=o||tt(r)),n}}),Ce({id:Tr,name:"order.create",check:function(e,t){var n=Jn;return n===Jn&&(e=St(".video_main .songli").length>0?x({},e,{method:"ds.live.placeOrder"}):x({},e,{method:"ds.api.placeOrder"}),B(e,function(t,n){""===t&&delete e[n]})),t.code=n,t.message=tt(n),e},send:function(e,t){var n=new Date;n=n.getTime();var r;return ft()?co&&co.jQuery?(e._t=co._t,r={type:"POST",url:"/api/call.do",data:e,dataType:"json"},St(".video_main .songli").length>0&&(r.headers={uuid:n,headCstr:n}),co.jQuery.ajax(r).then(function(e){return e},function(e){return e})):xt(function(e){e.reject({code:gr})}):fe("/api/call.do",e)},format:function(e,t,n){var r,o,a=Jn,i="";if(e)if(r=e.code,"1"===r)o=e.data,J(o)?o.orderId?o.channel=n.channel:a=lr:a=ur;else switch(a=sr,i=e.message,r){case"-1001":a=or;break;case"-2":a=ar}else a=cr;return a===Jn?(t.message="订单创建成功",e=o):(t.code=a,t.message=i||tt(a),t.data=e),e}}),Ce({id:yr,name:"order.load",check:function(e,t,n){var r=Jn;return e.orderId?x(e,{method:"ds.api.dsOrderInfo","var":"_ds_order_"+$r.now()}):r=nr,t.code=r,t.message=tt(r),e},send:function(e,t){return le(Wt+"/api/call.do",e)},format:function(e,t,n,r){var o,a,i={"-2":nr,"-3":dr,"-4":ir},c={0:dr,"-1":mr,"-2":tr},s=Jn,u="";return t.data=e,e?"1"!==e.code?i.hasOwnProperty(e.code)?s=i[e.code]:(s=sr,u=e.message):J(e.data)?(o=e.data,a=o.status,1!==a?s=c.hasOwnProperty(a)?c[a]:fr:o.orderDesc=o.orderDesc||""):s=ur:s=cr,t.code=s,t.message=u||tt(s),s!==Jn?t.data=e:e=e.data,e}}),Me(),Nt.create=qe,Nt.getConst=f,wt&&(Nt.debug=wt),Nt.Utils={o2q:$r.o2q,q2o:$r.q2o,isArray:$r.isArray,isBoolean:$r.isBoolean,isDate:$r.isDate,isFunction:$r.isFunction,isNumber:$r.isNumber,isObject:$r.isObject,isRegExp:$r.isRegExp,isString:$r.isString,isUndefined:$r.isUndefined,trim:$r.trim,trimLeft:$r.trimLeft,trimRight:$r.trimRight,zeroize:$r.zeroize,commaize:$r.commaize,dasherize:$r.dasherize,camelize:$r.camelize,decodeHTML:$r.decodeHTML,encodeHTML:$r.encodeHTML,forIn:$r.forIn,forEach:$r.forEach,assign:$r.assign,clone:$r.clone,now:$r.now},Nt.Template=s}}}(this);